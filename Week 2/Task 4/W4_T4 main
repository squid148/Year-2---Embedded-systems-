//week 4 task 4 main
#include "mbed.h"
#include "arm_book_lib.h"
#include "W2_functions.h"



int main()
{   //declare button check
    for (int b=0;b<6;b++){
buttons[b].mode(PullDown);
    }
    int input_val;
    int warn_count=0;
    cor_LED = 0;

//removed admin passcode set

while (true) {

    if (lock_LED == 1) {

        if (digit < 4) {
            if (lock_read(input_val)) { //added new read function to write user input into array
                user_input[digit] = input_val;
                digit++;
            }
        }
        else {
            if (admin_check()) {//created new admin check function to compare user input to admin override
                lock_LED=0;
                unlock_flash();
            }
            digit = 0;
        }

    }
    else {

        if (digit < 4) {//run input func if less than 4 digits have been entered
            if (input_read(input_val)) {//If input_val is true run if
                user_input[digit] = input_val;//insert user input into array for later
                digit++;
            }
        }
        else {

            if (check()) {//check func compares user_input array to passcode array and returns true if correct or false if mismatch found
                flash_cor();//if check is true then green LED is flashed
            }
            else {
                flash_incor();
                warn_count++; //increase warning counter by one

                if (warn_count==3) { //decided to remove bool warning since it was more complicaed than necessary
                    warn_flash();

                    
                }
                if (warn_count >=4) {
                        lockdown(); //lockdown triggers at 4 incorrect inputs
                        warn_count = 0;//reset warn count to zero
                    }
            }


            digit = 0; //resets digits for next attempt after 4 digits are inputted
        }
    }
    }
}
